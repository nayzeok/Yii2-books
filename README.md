# Yii2 Books Catalog

Веб-приложение на Yii2 Basic для управления книгами и авторами. Поддерживает CRUD, подписку на авторов и отправку SMS через SMSPilot.

## Возможности

- CRUD для книг и авторов
- Связь "многие ко многим" между книгами и авторами
- Подписка гостей на новых авторов по телефону
- Уведомления подписчиков о выходе новых книг через SMSPilot
- Отчет "ТОП-10 авторов" по количеству книг за выбранный год
- Разграничение доступа: гости могут подписываться, авторизованные пользователи управляют контентом

## Установка

1. Клонировать проект:
git clone https://github.com/yourname/yii2-books.git
cd yii2-books

2. Установить зависимости:
composer install

3. Настроить базу данных в config/db.php:
return [
    'class' => 'yii\db\Connection',
    'dsn' => 'mysql:host=127.0.0.1;dbname=yii2_books',
    'username' => 'root',
    'password' => '',
    'charset' => 'utf8mb4',
];

4. Применить миграции:
php yii migrate

5. Настроить SMSPilot в config/params_local.php:
return [
    'smsPilotApikey' => 'YOUR_API_KEY',
    'smsPilotSender' => 'INFORM',
];

## Использование

Авторизованные пользователи могут добавлять, редактировать и удалять книги и авторов.  
Гости могут подписываться на авторов. После подписки на указанный номер телефона отправляется SMS с уведомлением о новых книгах автора.

Пример отправки SMS:
Yii::$app->smsPilot->send('+79000000000', 'Новая книга: "Колобок" (2025)');

Отчет доступен по адресу /report/top-authors  
Можно передать параметр year, например: /report/top-authors?year=2025

Если данных за указанный год нет — выводится сообщение.

## Пример маршрутов

/book — список книг  
/book/create — добавить книгу  
/author — список авторов  
/author/view?id=1 — страница автора  
/subscription/create?id=1&name=Пушкин — подписка на автора  
/report/top-authors — отчет по авторам

## Авторизация

Тестовые данные:
Логин: demo  
Пароль: demo
